<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · LocalFilters.jl Package</title><meta name="title" content="Reference · LocalFilters.jl Package"/><meta property="og:title" content="Reference · LocalFilters.jl Package"/><meta property="twitter:title" content="Reference · LocalFilters.jl Package"/><meta name="description" content="Documentation for LocalFilters.jl Package."/><meta property="og:description" content="Documentation for LocalFilters.jl Package."/><meta property="twitter:description" content="Documentation for LocalFilters.jl Package."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">LocalFilters.jl Package</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../generic/">Generic local filters</a></li><li><a class="tocitem" href="../neighborhoods/">Neighborhoods, structuring elements, and kernels</a></li><li><a class="tocitem" href="../linear/">Linear filters</a></li><li><a class="tocitem" href="../nonlinear/">Non-linear filters</a></li><li><a class="tocitem" href="../morphology/">Non-linear morphological filters</a></li><li><a class="tocitem" href="../separable/">Efficient separable filters for associative operations</a></li><li class="is-active"><a class="tocitem" href>Reference</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#Simple-linear-filters"><span>Simple linear filters</span></a></li><li><a class="tocitem" href="#Mathematical-morphology"><span>Mathematical morphology</span></a></li><li><a class="tocitem" href="#Other-non-linear-filters"><span>Other non-linear filters</span></a></li><li><a class="tocitem" href="#Methods-to-build-local-filters"><span>Methods to build local filters</span></a></li><li><a class="tocitem" href="#Constants"><span>Constants</span></a></li><li><a class="tocitem" href="#Neighborhoods,-boxes,-kernels,-and-windows"><span>Neighborhoods, boxes, kernels, and windows</span></a></li><li><a class="tocitem" href="#Utilities"><span>Utilities</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/emmt/LocalFilters.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/emmt/LocalFilters.jl/blob/master/docs/src/reference.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Reference"><a class="docs-heading-anchor" href="#Reference">Reference</a><a id="Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Reference" title="Permalink"></a></h1><p>The following summarizes the documentation of types and methods provided by the <code>LocalFilters</code> package. This information is also available from the REPL by typing <code>?</code> followed by the name of a method or a type.</p><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#LocalFilters.FORWARD_FILTER"><code>LocalFilters.FORWARD_FILTER</code></a></li><li><a href="#LocalFilters.REVERSE_FILTER"><code>LocalFilters.REVERSE_FILTER</code></a></li><li><a href="#LocalFilters.Box"><code>LocalFilters.Box</code></a></li><li><a href="#LocalFilters.Indices"><code>LocalFilters.Indices</code></a></li><li><a href="#LocalFilters.Kernel"><code>LocalFilters.Kernel</code></a></li><li><a href="#LocalFilters.Window"><code>LocalFilters.Window</code></a></li><li><a href="#LocalFilters.ball"><code>LocalFilters.ball</code></a></li><li><a href="#LocalFilters.bilateralfilter"><code>LocalFilters.bilateralfilter</code></a></li><li><a href="#LocalFilters.bilateralfilter!"><code>LocalFilters.bilateralfilter!</code></a></li><li><a href="#LocalFilters.bottom_hat"><code>LocalFilters.bottom_hat</code></a></li><li><a href="#LocalFilters.bottom_hat!"><code>LocalFilters.bottom_hat!</code></a></li><li><a href="#LocalFilters.box"><code>LocalFilters.box</code></a></li><li><a href="#LocalFilters.centered"><code>LocalFilters.centered</code></a></li><li><a href="#LocalFilters.centered_offset"><code>LocalFilters.centered_offset</code></a></li><li><a href="#LocalFilters.check_axes"><code>LocalFilters.check_axes</code></a></li><li><a href="#LocalFilters.closing"><code>LocalFilters.closing</code></a></li><li><a href="#LocalFilters.closing!"><code>LocalFilters.closing!</code></a></li><li><a href="#LocalFilters.convolve"><code>LocalFilters.convolve</code></a></li><li><a href="#LocalFilters.convolve!"><code>LocalFilters.convolve!</code></a></li><li><a href="#LocalFilters.correlate"><code>LocalFilters.correlate</code></a></li><li><a href="#LocalFilters.correlate!"><code>LocalFilters.correlate!</code></a></li><li><a href="#LocalFilters.dilate"><code>LocalFilters.dilate</code></a></li><li><a href="#LocalFilters.dilate!"><code>LocalFilters.dilate!</code></a></li><li><a href="#LocalFilters.erode"><code>LocalFilters.erode</code></a></li><li><a href="#LocalFilters.erode!"><code>LocalFilters.erode!</code></a></li><li><a href="#LocalFilters.is_morpho_math_box"><code>LocalFilters.is_morpho_math_box</code></a></li><li><a href="#LocalFilters.kernel"><code>LocalFilters.kernel</code></a></li><li><a href="#LocalFilters.kernel_range"><code>LocalFilters.kernel_range</code></a></li><li><a href="#LocalFilters.localextrema"><code>LocalFilters.localextrema</code></a></li><li><a href="#LocalFilters.localextrema!"><code>LocalFilters.localextrema!</code></a></li><li><a href="#LocalFilters.localfilter"><code>LocalFilters.localfilter</code></a></li><li><a href="#LocalFilters.localfilter!"><code>LocalFilters.localfilter!</code></a></li><li><a href="#LocalFilters.localindices"><code>LocalFilters.localindices</code></a></li><li><a href="#LocalFilters.localmap"><code>LocalFilters.localmap</code></a></li><li><a href="#LocalFilters.localmap!"><code>LocalFilters.localmap!</code></a></li><li><a href="#LocalFilters.localmean"><code>LocalFilters.localmean</code></a></li><li><a href="#LocalFilters.localmean!"><code>LocalFilters.localmean!</code></a></li><li><a href="#LocalFilters.localreduce"><code>LocalFilters.localreduce</code></a></li><li><a href="#LocalFilters.localreduce!"><code>LocalFilters.localreduce!</code></a></li><li><a href="#LocalFilters.opening"><code>LocalFilters.opening</code></a></li><li><a href="#LocalFilters.opening!"><code>LocalFilters.opening!</code></a></li><li><a href="#LocalFilters.reverse_kernel"><code>LocalFilters.reverse_kernel</code></a></li><li><a href="#LocalFilters.strel"><code>LocalFilters.strel</code></a></li><li><a href="#LocalFilters.top_hat"><code>LocalFilters.top_hat</code></a></li><li><a href="#LocalFilters.top_hat!"><code>LocalFilters.top_hat!</code></a></li><li><a href="#LocalFilters.unit_range"><code>LocalFilters.unit_range</code></a></li></ul><h2 id="Simple-linear-filters"><a class="docs-heading-anchor" href="#Simple-linear-filters">Simple linear filters</a><a id="Simple-linear-filters-1"></a><a class="docs-heading-anchor-permalink" href="#Simple-linear-filters" title="Permalink"></a></h2><p><code>LocalFilters</code> provides a number of shift-invariant linear filters.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.correlate" href="#LocalFilters.correlate"><code>LocalFilters.correlate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">correlate(A, B=3) -&gt; dst</code></pre><p>yields the discrete correlation of the array <code>A</code> by the kernel defined by <code>B</code>. The result <code>dst</code> is an array similar to <code>A</code>.</p><p>Using <code>Idx(A)</code> to denote the set of valid indices for array <code>A</code> and assuming <code>B</code> is an array of numerical values, the discrete convolution of <code>A</code> by <code>B</code> writes:</p><pre><code class="nohighlight hljs">dst = similar(A, T)
for i ∈ Idx(dst)
    v = zero(T)
    @inbounds for j ∈ Idx(A) ∩ (i + Idx(B))
        v += A[j]*B[j-i]
    end
    dst[i] = v
end</code></pre><p>with <code>T</code> the type of the sum of the products of the elements of <code>A</code> and <code>B</code>, and where <code>Idx(A) ∩ (i + Idx(B))</code> denotes the subset of indices <code>j</code> such that <code>j ∈ Idx(A)</code> and <code>j - i ∈ Idx(B)</code> and thus for which <code>A[j]</code> and <code>B[j-i]</code> are valid.</p><p>See also <a href="#LocalFilters.correlate!"><code>correlate!</code></a> and <a href="#LocalFilters.convolve"><code>convolve</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/linear.jl#L100-L124">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.correlate!" href="#LocalFilters.correlate!"><code>LocalFilters.correlate!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">correlate!(dst, A, B) -&gt; dst</code></pre><p>overwrites <code>dst</code> with the discrete convolution of <code>A</code> by the kernel <code>B</code> and returns <code>dst</code>.</p><p>See also <a href="#LocalFilters.correlate"><code>correlate</code></a> and <a href="#LocalFilters.localfilter!"><code>localfilter!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/linear.jl#L126-L133">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.convolve" href="#LocalFilters.convolve"><code>LocalFilters.convolve</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">convolve(A, B=3)</code></pre><p>yields the discrete convolution of array <code>A</code> by the kernel defined by <code>B</code>. The result <code>dst</code> is an array similar to <code>A</code>.</p><p>Using <code>Idx(A)</code> to denote the set of valid indices for array <code>A</code> and assuming <code>B</code> is an array of values, the discrete convolution of <code>A</code> by <code>B</code> writes:</p><pre><code class="nohighlight hljs">dst = similar(A, T)
for i ∈ Idx(dst)
    v = zero(T)
    @inbounds for j ∈ Idx(A) ∩ (i - Idx(B))
        v += A[j]*B[i-j]
    end
    dst[i] = v
end</code></pre><p>with <code>T</code> the type of the sum of the products of the elements of <code>A</code> and <code>B</code>, and where <code>Idx(A) ∩ (i - Idx(B))</code> denotes the subset of indices <code>j</code> such that <code>j ∈ Idx(A)</code> and <code>i - j ∈ Idx(B)</code> and thus for which <code>A[j]</code> and <code>B[i-j]</code> are valid.</p><p>See also <a href="#LocalFilters.convolve!"><code>convolve!</code></a> and <a href="#LocalFilters.localfilter!"><code>localfilter!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/linear.jl#L135-L159">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.convolve!" href="#LocalFilters.convolve!"><code>LocalFilters.convolve!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">convolve!(dst, A, B) -&gt; dst</code></pre><p>overwrites <code>dst</code> with the discrete convolution of <code>A</code> by the kernel <code>B</code> and returns <code>dst</code>.</p><p>See also <a href="#LocalFilters.convolve"><code>convolve</code></a> and <a href="#LocalFilters.localfilter!"><code>localfilter!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/linear.jl#L161-L168">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.localmean" href="#LocalFilters.localmean"><code>LocalFilters.localmean</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">localmean([T,] A, B=3; null=zero(T), order=FORWARD_FILTER)</code></pre><p>yields the local mean of <code>A</code> in a neighborhood defined by <code>B</code>. The result is an array similar to <code>A</code>. If <code>B</code> is not specified, the neighborhood is a hyper-rectangular sliding window of size 3 in every dimension. Otherwise, <code>B</code> may be specified as a Cartesian box, or as an array of booleans of same number of dimensions as <code>A</code>. If <code>B</code> is a single odd integer (as it is by default), the neighborhood is assumed to be a hyper-rectangular sliding window of size <code>B</code> in every dimension.</p><p>Optional argument <code>T</code> is to specify the element type of the result.</p><p>Keyword <code>null</code> may be used to specify the value of the result where the sum of the weights in a local neighborhood is zero. By default, <code>null = zero(T)</code>.</p><p>Keyword <code>order</code> specifies the filter direction, <code>FORWARD_FILTER</code> by default.</p><p>See also <a href="#LocalFilters.localmean!"><code>localmean!</code></a> and <a href="#LocalFilters.localfilter!"><code>localfilter!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/linear.jl#L1-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.localmean!" href="#LocalFilters.localmean!"><code>LocalFilters.localmean!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">localmean!(dst, A, B=3; null=zero(eltype(dst)), order=FORWARD_FILTER) -&gt; dst</code></pre><p>overwrites <code>dst</code> with the local mean of <code>A</code> in a neighborhood defined by <code>B</code> and returns <code>dst</code>.</p><p>Keyword <code>null</code> may be used to specify the value of the result where the sum of the weights in the a neighborhood is zero.</p><p>Keyword <code>order</code> specifies the filter direction, <code>FORWARD_FILTER</code> by default.</p><p>See also <a href="#LocalFilters.localmean"><code>localmean</code></a> and <a href="#LocalFilters.localfilter!"><code>localfilter!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/linear.jl#L30-L43">source</a></section></article><h2 id="Mathematical-morphology"><a class="docs-heading-anchor" href="#Mathematical-morphology">Mathematical morphology</a><a id="Mathematical-morphology-1"></a><a class="docs-heading-anchor-permalink" href="#Mathematical-morphology" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.erode" href="#LocalFilters.erode"><code>LocalFilters.erode</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">erode(A, B=3; order=FORWARD_FILTER, slow=false) -&gt; Amin</code></pre><p>yields the erosion of <code>A</code> by the structuring element defined by <code>B</code>. The returned result, <code>Amin</code>, is similar to <code>A</code> (same size and type) and its values are the local minima of <code>A</code> in the neighborhood defined by <code>B</code>.</p><p>Keyword <code>order</code> specifies the filter direction, <code>FORWARD_FILTER</code> by default.</p><p>If <code>B</code> is not an <code>N</code>-dimensional array, <a href="#LocalFilters.kernel"><code>kernel(Dims{N},B)</code></a> is called to build a kernel with <code>N = ndims(A)</code> the number of dimensions of <code>A</code>.</p><p>If the structuring element <code>B</code> is equivalent to a simple hyper-rectangular sliding window (which is the case by default) and unless keyword <code>slow</code> is true, the much faster van Herk-Gil-Werman algorithm is used.</p><p>An erosion is one of the most basic operations of mathematical morphology. See <a href="#LocalFilters.erode!"><code>erode!</code></a> for an in-place version of the method, <a href="#LocalFilters.dilate"><code>dilate</code></a> for retrieving the local maxima, and <a href="#LocalFilters.localextrema"><code>localextrema</code></a> for performing an erosion and a dilation in a single pass.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L1-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.erode!" href="#LocalFilters.erode!"><code>LocalFilters.erode!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">erode!(Amin, A, B=3; order=FORWARD_FILTER, slow=false) -&gt; Amin</code></pre><p>overwrites <code>Amin</code> with the erosion of the array <code>A</code> by the structuring element defined by <code>B</code> and returns <code>Amin</code>.</p><p>Keyword <code>order</code> specifies the filter direction, <code>FORWARD_FILTER</code> by default.</p><p>If the structuring element <code>B</code> is equivalent to a simple hyper-rectangular sliding window (which is the case by default) and unless keyword <code>slow</code> is true, the much faster van Herk-Gil-Werman algorithm is used and the operation can be done in-place. That is, <code>A</code> and <code>Amin</code> can be the same arrays. In that case, the following syntax is allowed:</p><pre><code class="nohighlight hljs">erode!(A, B=3; order=FORWARD_FILTER, ) -&gt; A</code></pre><p>See <a href="#LocalFilters.erode"><code>erode</code></a> for an out-of-place version and for more information.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L24-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.dilate" href="#LocalFilters.dilate"><code>LocalFilters.dilate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dilate(A, B=3; order=FORWARD_FILTER, slow=false) -&gt; Amax</code></pre><p>yields the dilation of <code>A</code> by the structuring element defined by <code>B</code>. The returned result, <code>Amax</code>, is similar to <code>A</code> (same size and type) and its values are the local maxima of <code>A</code> in the neighborhood defined by <code>B</code>.</p><p>Keyword <code>order</code> specifies the filter direction, <code>FORWARD_FILTER</code> by default.</p><p>If <code>B</code> is not an <code>N</code>-dimensional array, <a href="#LocalFilters.kernel"><code>kernel(Dims{N},B)</code></a> is called to build a kernel with <code>N = ndims(A)</code> the number of dimensions of <code>A</code>.</p><p>If the structuring element <code>B</code> is equivalent to a simple hyper-rectangular sliding window (which is the case by default) and unless keyword <code>slow</code> is true, the much faster van Herk-Gil-Werman algorithm is used.</p><p>A dilation is one of the most basic operations of mathematical morphology. See <a href="#LocalFilters.dilate!"><code>dilate!</code></a> for an in-place version of the method, <a href="#LocalFilters.erode"><code>erode</code></a> for retrieving the local minima, and <a href="#LocalFilters.localextrema"><code>localextrema</code></a> for performing an erosion and a dilation in a single pass.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L43-L64">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.dilate!" href="#LocalFilters.dilate!"><code>LocalFilters.dilate!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dilate!(Amax, A, B=3; order=FORWARD_FILTER, slow=false) -&gt; Amax</code></pre><p>overwrites <code>Amax</code> with a dilation of the array <code>A</code> by the structuring element defined by <code>B</code> and returns <code>Amax</code>.</p><p>Keyword <code>order</code> specifies the filter direction, <code>FORWARD_FILTER</code> by default.</p><p>If the structuring element <code>B</code> is equivalent to a simple hyper-rectangular sliding window (which is the case by default) and unless keyword <code>slow</code> is true, the much faster van Herk-Gil-Werman algorithm is used and the operation can be done in-place. That is, <code>A</code> and <code>Amin</code> can be the same arrays. In that case, the following syntax is allowed:</p><pre><code class="nohighlight hljs">dilate!(A, B=3; order=FORWARD_FILTER) -&gt; A</code></pre><p>See <a href="#LocalFilters.dilate"><code>dilate</code></a> for an out-of-place version and for more information.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L66-L83">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.localextrema" href="#LocalFilters.localextrema"><code>LocalFilters.localextrema</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">localextrema(A, B=3; order=FORWARD_FILTER) -&gt; Amin, Amax</code></pre><p>yields the results of performing an erosion and a dilation of <code>A</code> by the structuring element defined by <code>B</code> in a single pass. Calling this method is usually almost twice as fast as calling <a href="#LocalFilters.erode"><code>erode</code></a> and <a href="#LocalFilters.dilate"><code>dilate</code></a>.</p><p>Keyword <code>order</code> specifies the filter direction, <code>FORWARD_FILTER</code> by default.</p><p>See <a href="#LocalFilters.localextrema!"><code>localextrema!</code></a> for an in-place version of the method, and <a href="#LocalFilters.erode"><code>erode</code></a> or <a href="#LocalFilters.dilate"><code>dilate</code></a> for a description of these operations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L199-L211">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.localextrema!" href="#LocalFilters.localextrema!"><code>LocalFilters.localextrema!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">localextrema!(Amin, Amax, A, B=3; order=FORWARD_FILTER) -&gt; Amin, Amax</code></pre><p>overwrites <code>Amin</code> and <code>Amax</code> with, respectively, an erosion and a dilation of the array <code>A</code> by the structuring element defined by <code>B</code> in a single pass.</p><p>Keyword <code>order</code> specifies the filter direction, <code>FORWARD_FILTER</code> by default.</p><p>See <a href="#LocalFilters.localextrema"><code>localextrema</code></a> for an out-of-place version for more information.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L215-L225">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.closing" href="#LocalFilters.closing"><code>LocalFilters.closing</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">closing(A, B=3; order=FORWARD_FILTER, slow=false) -&gt; dst</code></pre><p>yields a closing of array <code>A</code> by the structuring element defined by <code>B</code>. A closing is a dilation followed by an erosion. The result <code>dst</code> is an array similar to <code>A</code>.</p><p>See <a href="#LocalFilters.closing!"><code>closing!</code></a> for an in-place version of the method, <a href="#LocalFilters.opening"><code>opening</code></a> for a related filter, and <a href="#LocalFilters.erode"><code>erode</code></a> or <a href="#LocalFilters.dilate"><code>dilate</code></a> for a description of these operations and for the meaning of keywords.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L285-L295">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.closing!" href="#LocalFilters.closing!"><code>LocalFilters.closing!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">closing!(dst, wrk, A, B=3; order=FORWARD_FILTER, slow=false) -&gt; dst</code></pre><p>overwrites <code>dst</code> with the result of a closing of <code>A</code> by the structuring element defined by <code>B</code> using <code>wrk</code> as a workspace array. The arguments <code>dst</code>, <code>wrk</code>, and <code>A</code> must be similar arrays, <code>dst</code> and <code>A</code> may be identical, but <code>wrk</code> must not be the same array as <code>A</code> or <code>dst</code>. The destination <code>dst</code> is returned.</p><p>See <a href="#LocalFilters.closing"><code>closing</code></a> for a description of this kind of filter and for the meaning of the arguments and keywords.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L297-L308">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.opening" href="#LocalFilters.opening"><code>LocalFilters.opening</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">opening(A, B=3; order=FORWARD_FILTER, slow=false) -&gt; dst</code></pre><p>yields an opening of array <code>A</code> by the structuring element defined by <code>B</code>. An opening is an erosion followed by a dilation. The result <code>dst</code> is an array similar to <code>A</code>.</p><p>See <a href="#LocalFilters.opening!"><code>opening!</code></a> for an in-place version of the method, <a href="#LocalFilters.closing"><code>closing</code></a> for a related filter, and <a href="#LocalFilters.erode"><code>erode</code></a> or <a href="#LocalFilters.dilate"><code>dilate</code></a> for a description of these operations and for the meaning of keywords.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L315-L325">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.opening!" href="#LocalFilters.opening!"><code>LocalFilters.opening!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">opening!(dst, wrk, A, B=3; order=FORWARD_FILTER, slow=false) -&gt; dst</code></pre><p>overwrites <code>dst</code> with the result of an opening of <code>A</code> by the structuring element defined by <code>B</code> using <code>wrk</code> as a workspace array. The arguments <code>dst</code>, <code>wrk</code>, and <code>A</code> must be similar arrays, <code>dst</code> and <code>A</code> may be identical, but <code>wrk</code> must not be the same array as <code>A</code> or <code>dst</code>. The destination <code>dst</code> is returned.</p><p>See <a href="#LocalFilters.opening"><code>opening</code></a> for a description of this kind of filter and for the meaning of the arguments and keywords.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L327-L338">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.top_hat" href="#LocalFilters.top_hat"><code>LocalFilters.top_hat</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">top_hat(A, B=3[, C]; order=FORWARD_FILTER, slow=false) -&gt; dst</code></pre><p>performs a <em>summit detection</em> by applying a top-hat filter to array <code>A</code> using the structuring element defined by <code>B</code> for the feature detection. Top-hat filtering is equivalent to:</p><pre><code class="nohighlight hljs">dst = A .- opening(A, B)</code></pre><p>Optional argument <code>C</code> specifies the structuring element for smoothing <code>A</code> prior to top-hat filtering. If <code>B</code> and <code>C</code> are specified as the radii of the structuring elements, then <code>C</code> should be smaller than <code>B</code>. For instance:</p><pre><code class="nohighlight hljs">top_hat(bitmap, 3, 1)</code></pre><p>may be used to detect text or lines in a bitmap image.</p><p>Keyword <code>order</code> specifies the filter(s) direction(s), <code>FORWARD_FILTER</code> by default. If <code>C</code> is specified, <code>order</code> may be a 2-tuple to specify a first order for <code>B</code> and a second one for <code>C</code>.</p><p>See <a href="#LocalFilters.bottom_hat"><code>bottom_hat</code></a> for a related operation, <a href="#LocalFilters.top_hat!"><code>LocalFilters.top_hat!</code></a> for an in-place version.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L361-L385">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.top_hat!" href="#LocalFilters.top_hat!"><code>LocalFilters.top_hat!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LocalFilters.top_hat!(dst, wrk, A, B=3; order=FORWARD_FILTER, slow=false) -&gt; dst</code></pre><p>overwrites <code>dst</code> with the result of a top-hat filter applied to <code>A</code> with structuring element <code>B</code>, and using <code>wrk</code> as a workspace whose contents is not preserved. The arguments <code>A</code>, <code>dst</code>, and <code>wrk</code> must be similar but different arrays. The destination <code>dst</code> is returned.</p><p>See also <a href="#LocalFilters.top_hat"><code>top_hat</code></a> for more details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L387-L397">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.bottom_hat" href="#LocalFilters.bottom_hat"><code>LocalFilters.bottom_hat</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">bottom_hat(A, B=3[, C]; order=FORWARD_FILTER, slow=false) -&gt; dst</code></pre><p>performs a <em>valley detection</em> by applying a bottom-hat filter to array <code>A</code> using the structuring element defined by <code>B</code> for the feature detection. Bottom-hat filtering is equivalent to:</p><pre><code class="nohighlight hljs">dst = closing(A, B) .- A</code></pre><p>Optional argument <code>C</code> specifies the structuring element for smoothing <code>A</code> prior to bottom-hat filtering. If <code>B</code> and <code>C</code> are specified as the radii of the structuring elements, then <code>C</code> should be smaller than <code>B</code>.</p><p>Keyword <code>order</code> specifies the filter(s) direction(s), <code>FORWARD_FILTER</code> by default. If <code>C</code> is specified, <code>order</code> may be a 2-tuple to specify a first order for <code>B</code> and a second one for <code>C</code>.</p><p>See <a href="#LocalFilters.top_hat"><code>top_hat</code></a> for a related operation, <a href="#LocalFilters.bottom_hat!"><code>LocalFilters.bottom_hat!</code></a> for an in-place version.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L409-L429">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.bottom_hat!" href="#LocalFilters.bottom_hat!"><code>LocalFilters.bottom_hat!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LocalFilters.bottom_hat!(dst, wrk, A, B=3; order=FORWARD_FILTER, slow=false) -&gt; dst</code></pre><p>overwrites <code>dst</code> with the result of a bottom-hat filter applied to <code>A</code> with structuring element <code>B</code> and optional smoothing element <code>C</code>. Argument <code>wrk</code> is a workspace array whose contents is not preserved. The arguments <code>A</code>, <code>dst</code>, and <code>wrk</code> must be similar but different arrays. The destination <code>dst</code> is returned.</p><p>See also <a href="#LocalFilters.bottom_hat"><code>bottom_hat</code></a> for more details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/morphology.jl#L431-L441">source</a></section></article><h2 id="Other-non-linear-filters"><a class="docs-heading-anchor" href="#Other-non-linear-filters">Other non-linear filters</a><a id="Other-non-linear-filters-1"></a><a class="docs-heading-anchor-permalink" href="#Other-non-linear-filters" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.bilateralfilter" href="#LocalFilters.bilateralfilter"><code>LocalFilters.bilateralfilter</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">bilateralfilter([T = float(eltype(A)),] A, F, G...=3; order = FORWARD_FILTER)</code></pre><p>yields the result of applying the bilateral filter on array <code>A</code>.</p><p>Argument <code>F</code> specifies how to smooth the differences in values. It can be:</p><ul><li><p>a function, say <code>f</code>, which is called as <code>f(A[i],A[j])</code> to yield a nonnegative weight for <code>i</code> the central index and <code>j</code> the index in a nearby position;</p></li><li><p>a positive real, say <code>σ</code>, which is assumed to be the standard deviation of a Gaussian.</p></li></ul><p>Arguments <code>G, ...</code> specify the settings of the distance filter for smoothing differences in coordinates. There are several possibilities:</p><ul><li><p><code>G... = wgt</code> an array of nonnegative weights or of Booleans. The axes of <code>wgt</code> must have offsets so that the zero index is part of the indices of <code>wgt</code>.</p></li><li><p><code>G... = f, w</code> with <code>f</code> a function and <code>w</code> any kind of argument that can be used to build a window <code>win</code> specifying the extension of the neighborhood. The value of the distance filter will be <code>max(f(i),0)</code> for all Cartesian index <code>i</code> of <code>win</code> such that <code>win[i]</code> is true. See <a href="#LocalFilters.kernel"><code>kernel</code></a> for the different ways to specify a window.</p></li><li><p><code>G... = σ</code> or , <code>G... = σ, w</code> with <code>σ</code> a positive real assumed to be the standard deviation of a Gaussian function and <code>w</code> any kind of argument that can be used to build a window <code>win</code> specifying the extension of the neighborhood. If <code>w</code> is not specified, a default window of size <code>±3σ</code> is assumed.</p></li></ul><p>Optional argument <code>T</code> is to specify the element type of the result. This is needed if the default is unsuitable.</p><p>See <a href="#LocalFilters.bilateralfilter!"><code>bilateralfilter!</code></a> for an in-place version of this function and see <a href="https://en.wikipedia.org/wiki/Bilateral_filter">Wikipedia</a> for a description of the bilateral filter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/bilateral.jl#L52-L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.bilateralfilter!" href="#LocalFilters.bilateralfilter!"><code>LocalFilters.bilateralfilter!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">bilateralfilter!(dst, A, F, G...; order = FORWARD_FILTER) -&gt; dst</code></pre><p>overwrites <code>dst</code> with the result of applying the bilateral filter on array <code>A</code> and returns <code>dst</code>.</p><p>See <a href="#LocalFilters.bilateralfilter"><code>bilateralfilter</code></a> for a description of the other arguments than <code>dst</code> and see <a href="https://en.wikipedia.org/wiki/Bilateral_filter">Wikipedia</a> for a description of the bilateral filter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/bilateral.jl#L94-L104">source</a></section></article><h2 id="Methods-to-build-local-filters"><a class="docs-heading-anchor" href="#Methods-to-build-local-filters">Methods to build local filters</a><a id="Methods-to-build-local-filters-1"></a><a class="docs-heading-anchor-permalink" href="#Methods-to-build-local-filters" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.localfilter" href="#LocalFilters.localfilter"><code>LocalFilters.localfilter</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">localfilter([T=eltype(A),] A, B, initial, update, final=identity; kwds...) -&gt; dst</code></pre><p>out of place version of <a href="#LocalFilters.localfilter!"><code>localfilter!</code></a> which is equivalent to:</p><pre><code class="nohighlight hljs">localfilter!(similar(A, T), A, B, initial, update, final=identity; kwds...)</code></pre><p>Optional argument <code>T</code> is to specify the element type of the result; by default, <code>T</code> is the element type of <code>A</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/generic.jl#L1-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.localfilter!" href="#LocalFilters.localfilter!"><code>LocalFilters.localfilter!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">localfilter!(dst, A, B, initial, update::Function, final::Function=identity;
             order=FORWARD_FILTER) -&gt; dst</code></pre><p>overwrites the destination <code>dst</code> with the result of a local filter applied to the source <code>A</code>, on a relative neighborhood defined by <code>B</code>, and implemented by <code>initial</code>, <code>update</code>, and <code>final</code>. The <code>initial</code> argument may be a function or not. The purpose of these latter arguments is explained by the following pseudo-codes implementing the local filtering. Keyword <code>order</code> specifies the filter direction, <code>FORWARD_FILTER</code> by default.</p><p>If <code>order = FORWARD_FILTER</code>:</p><pre><code class="nohighlight hljs">@inbounds for i ∈ indices(dst)
    v = initial isa Function ? initial(A[i]) : initial
    for j ∈ indices(A) ∩ (indices(B) + i)
        v = update(v, A[j], B[j-i])
    end
    dst[i] = final(v)
end</code></pre><p>else if <code>order = REVERSE_FILTER</code>:</p><pre><code class="nohighlight hljs">@inbounds for i ∈ indices(dst)
    v = initial isa Function ? initial(A[i]) : initial
    for j ∈ indices(A) ∩ (i - indices(B))
        v = update(v, A[j], B[i-j])
    end
    dst[i] = final(v)
end</code></pre><p>where <code>indices(A)</code> denotes the range of indices of any array <code>A</code> while <code>indices(B) + i</code> and <code>i - indices(B)</code> respectively denote the set of indices <code>j</code> such that <code>j - i ∈ indices(B)</code> and <code>i - j ∈ indices(B)</code>. In other words, <code>j ∈ indices(A) ∩ (i - indices(B))</code> means all indices <code>j</code> such that <code>j ∈ indices(A)</code> and <code>i - j ∈ indices(B)</code> so that <code>A[j]</code> and <code>B[i-j]</code> are in-bounds.</p><p>If <code>initial</code> is a function, the initial value of the state variable <code>v</code> in the above pseudo-codes is given by <code>v = initial(A[i])</code> with <code>i</code> the current index in <code>dst</code>. Hence, in that case, the destination array <code>dst</code> and the source array <code>src</code> must have the same axes.</p><p>For example, implementing a local minimum filter (that is, an <em>erosion</em>), is as simple as:</p><pre><code class="nohighlight hljs">localfilter!(dst, A, B, typemax(eltype(A)),
             (v,a,b) -&gt; ifelse(b, min(v,a), v))</code></pre><p>As another example, implementing a convolution by <code>B</code> writes:</p><pre><code class="nohighlight hljs">T = promote_type(eltype(A), eltype(B))
localfilter!(dst, A, B, zero(T), (v,a,b) -&gt; v + a*b)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/generic.jl#L18-L69">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.localmap" href="#LocalFilters.localmap"><code>LocalFilters.localmap</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">localmap(f, [T=eltype(A),] A, B=3; null=zero(T), order=FORWARD_FILTER)</code></pre><p>for each position in <code>A</code>, applies the function <code>f</code> to the values of <code>A</code> extracted from the neighborhood defined by <code>B</code>.</p><p>Optional argument <code>T</code> is to specify the element type of the result; by default, <code>T</code> is the element type of <code>A</code>.</p><p>Keyword <code>order</code> specifies the filter direction, <code>FORWARD_FILTER</code> by default.</p><p><strong>Remarks</strong></p><ul><li><p>The function <code>f</code> is never called with an empty vector of values. Keyword <code>null</code> may be used to specify the value of the result where the neighborhood is empty. By default, <code>null = zero(T)</code> with <code>T</code> the element type of the result.</p></li><li><p>The vector of values passed to <code>f</code> may be modified by <code>f</code> if needed (for example for faster sorting of the values).</p></li></ul><p><strong>Examples</strong></p><p>With argument <code>f</code> set to <code>minimum</code> or <code>maximum</code>, <code>localmap</code> respectively yields the <em>erosion</em> and the <em>dilation</em> of the input array. However <a href="#LocalFilters.erode"><code>erode</code></a> and <a href="#LocalFilters.dilate"><code>dilate</code></a> methods are faster until <code>localmap</code> is specialized for these functions.</p><p>Applying a <em>median filter</em> of the 2-dimensional image <code>img</code> in a sliding <code>5×5</code> window can be done by:</p><pre><code class="language-julia hljs">using Statistics
med = localmap(median!, img, 5; eltype=float(eltype(img)), null=NaN)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/localmap.jl#L1-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.localmap!" href="#LocalFilters.localmap!"><code>LocalFilters.localmap!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">localmap!(f, dst, A, B=3; null=zero(eltype(dst)), order=FORWARD_FILTER)</code></pre><p>set each entry of <code>dst</code>, to the result of applying the function <code>f</code> to the values of <code>A</code> extracted from the neighborhood defined by <code>B</code>.</p><p>The function <code>f</code> is never called with an empty vector of values. Keyword <code>null</code> may be used to specify the value of the result where the neighborhood is empty. By default, <code>null = zero(T)</code> with <code>T</code> the element type of the result.</p><p>Keyword <code>order</code> specifies the filter direction, <code>FORWARD_FILTER</code> by default.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/localmap.jl#L44-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.localreduce" href="#LocalFilters.localreduce"><code>LocalFilters.localreduce</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">localreduce(op, [T=eltype(A),] A, dims, rngs; kwds...) -&gt; dst</code></pre><p>yields the local reduction by the associative binary operator <code>op</code> of the values of <code>A</code> into contiguous hyper-rectangular neighborhoods defined by the interval(s) <code>rngs</code> along dimension(s) <code>dims</code> of <code>A</code>. The algorithm of van Herk-Gil-Werman is used to compute the reduction.</p><p>Optional argument <code>T</code> is to specify the element type of the result.</p><p>Argument <code>dims</code> specifies along which dimension(s) of <code>A</code> the local reduction is to be applied, it can be a single integer, a tuple of integers, or a colon <code>:</code> to apply the operation to all dimensions. Dimensions are processed in the order given by <code>dims</code> (the same dimension may appear several times) and there must be a matching interval in <code>rngs</code> to specify the structuring element (except that, if <code>rngs</code> is a single interval, it is used for every dimension in <code>dims</code>). An interval is either an integer or an integer valued unit range in the form <code>kmin:kmax</code>. An interval specified as a single integer is treated as an approximately centered range of this length.</p><p>Keyword <code>order</code> specifies the filter direction, <code>FORWARD_FILTER</code> by default.</p><p>Keyword <code>work</code> may be used to provide a workspace array of type <code>Vector{T}</code> which is automatically resized as needed.</p><p>Assuming a mono-dimensional array <code>A</code>, the single reduction pass:</p><pre><code class="nohighlight hljs">dst = localreduce(op, A, :, rng)</code></pre><p>amounts to computing (assuming forward ordering):</p><pre><code class="nohighlight hljs">dst[j] =  A[i+kmin] ⋄ A[i+kmin+1] ⋄ ... ⋄ A[i+kmax-1] ⋄ A[i+kmax]</code></pre><p>for all <code>j ∈ axes(dst,1)</code>, with <code>x ⋄ y = op(x, y)</code>, <code>kmin = first(rng)</code> and <code>kmax = last(rng)</code>. Note that if <code>kmin = kmax = k</code>, the result of the filter is to operate a simple shift by <code>k</code> along the corresponding dimension and has no effects if <code>k = 0</code>. This can be exploited to not filter some dimension(s).</p><p>Flat boundary conditions are assumed for <code>A[i+k]</code> in the above formula.</p><p><strong>Examples</strong></p><p>The <em>morphological erosion</em> (local minimum) of the array <code>A</code> on a centered structuring element of width 7 in every dimension can be obtained by:</p><pre><code class="nohighlight hljs">localreduce(min, A, :, -3:3)</code></pre><p>or equivalently by:</p><pre><code class="nohighlight hljs">localreduce(min, A, :, 7)</code></pre><p>Index interval <code>0:0</code> may be specified to do nothing along the corresponding dimension. For instance, assuming <code>A</code> is a three-dimensional array:</p><pre><code class="nohighlight hljs">localreduce(max, A, :, (-3:3, 0:0, -4:4))</code></pre><p>yields the <em>morphological dilation</em> (<em>i.e.</em> local maximum) of <code>A</code> in a centered local neighborhood of size <code>7×1×9</code> (nothing is done along the second dimension). The same result may be obtained with:</p><pre><code class="nohighlight hljs">localreduce(max, A, (1,3), (-3:3, -4:4))</code></pre><p>where the second dimension is omitted from the list of dimensions.</p><p>The <em>local average</em> of the two-dimensional array <code>A</code> on a centered sliding window of size 11×11 can be computed as:</p><pre><code class="nohighlight hljs">localreduce(+, A, :, (-5:5, -5:5)) ./ 11^2</code></pre><p>See <a href="#LocalFilters.localreduce!"><code>localreduce!</code></a> for an in-place version of the method.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/localreduce.jl#L72-L142">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.localreduce!" href="#LocalFilters.localreduce!"><code>LocalFilters.localreduce!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">localreduce!(op, [dst = A,] A, dims, rngs; kwds...)</code></pre><p>overwrites the contents of <code>dst</code> with the local reduction by the associative binary operator <code>op</code> of the values of <code>A</code> into contiguous hyper-rectangular neighborhoods defined by the interval(s) <code>rngs</code> along dimension(s) <code>dims</code> of <code>A</code>. Except if a single dimension of interest is specified by <code>dims</code>, the destination <code>dst</code> must have the same indices as the source <code>A</code> (that is, <code>axes(dst) == axes(A)</code>). Operation may be done in-place and <code>dst</code> and <code>A</code> can be the same; this is the default behavior if <code>dst</code> is not specified. The algorithm of van Herk-Gil-Werman is used to compute the reduction.</p><p>See <a href="#LocalFilters.localreduce"><code>localreduce</code></a> for a full description of the method and for accepted keywords.</p><p>The in-place <em>morphological erosion</em> (local minimum) of the array <code>A</code> on a centered structuring element of width 7 in every dimension can be obtained by:</p><pre><code class="nohighlight hljs">localreduce!(min, A, :, -3:3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/localreduce.jl#L149-L167">source</a></section></article><h2 id="Constants"><a class="docs-heading-anchor" href="#Constants">Constants</a><a id="Constants-1"></a><a class="docs-heading-anchor-permalink" href="#Constants" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.FORWARD_FILTER" href="#LocalFilters.FORWARD_FILTER"><code>LocalFilters.FORWARD_FILTER</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FORWARD_FILTER</code></pre><p>is an exported constant object used to indicate <em>forward</em> ordering of indices in local filter operations. It can be called as:</p><pre><code class="nohighlight hljs">FORWARD_FILTER(i, j) -&gt; j - i</code></pre><p>to yield the index in the filter kernel. See also <a href="#LocalFilters.REVERSE_FILTER"><code>REVERSE_FILTER</code></a> for <em>reverse</em> ordering and <a href="#LocalFilters.localindices"><code>LocalFilters.localindices</code></a> for building a range of valid indices <code>j</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/types.jl#L94-L106">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.REVERSE_FILTER" href="#LocalFilters.REVERSE_FILTER"><code>LocalFilters.REVERSE_FILTER</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">REVERSE_FILTER</code></pre><p>is an exported constant object used to indicate <em>reverse</em> ordering of indices in local filter operations. It can be called as:</p><pre><code class="nohighlight hljs">REVERSE_FILTER(i, j) -&gt; i - j</code></pre><p>to yield the index in the filter kernel. See also <a href="#LocalFilters.FORWARD_FILTER"><code>FORWARD_FILTER</code></a> for <em>forward</em> ordering and <a href="#LocalFilters.localindices"><code>LocalFilters.localindices</code></a> for building a range of valid indices <code>j</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/types.jl#L109-L121">source</a></section></article><h2 id="Neighborhoods,-boxes,-kernels,-and-windows"><a class="docs-heading-anchor" href="#Neighborhoods,-boxes,-kernels,-and-windows">Neighborhoods, boxes, kernels, and windows</a><a id="Neighborhoods,-boxes,-kernels,-and-windows-1"></a><a class="docs-heading-anchor-permalink" href="#Neighborhoods,-boxes,-kernels,-and-windows" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.kernel" href="#LocalFilters.kernel"><code>LocalFilters.kernel</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">kernel([Dims{N},] args...)</code></pre><p>yields an <code>N</code>-dimensional abstract array built from <code>args...</code> and which can be used as a kernel in local filtering operations. The kernel is called a <em>neighborhood</em>, a <em>sliding window</em>, or a <em>structuring element</em> when its element are of type <code>Bool</code> and indicate whether a cell is to be considered. A <em>box</em> is a kernel whose elements are all <code>true</code>, it corresponds to an hyper-rectangular neighborhood whose sides are aligned with the Cartesian axes.</p><ul><li><p>If <code>args...</code> is composed of <code>N</code> integers and/or ranges or if it is an <code>N</code>-tuple of integers and/or ranges, a <em>box</em> is returned whose axes are specified by <code>args...</code>. Each integer argument is converted in a centered unit range of this length (see <a href="#LocalFilters.kernel_range"><code>LocalFilters.kernel_range</code></a>).</p></li><li><p>If <code>Dims{N}</code> is provided and <code>args...</code> is a single integer or range, it is interpreted as being the same for all dimensions of an <code>N</code>-dimensional kernel. For example, <code>kernel(Dims{3},5)</code> yields a 3-dimensional <em>box</em> with index range <code>-2:2</code> in every dimension.</p></li><li><p>If <code>args...</code> is two Cartesian indices or a 2-tuple of Cartesian indices, say <code>start</code> and <code>stop</code>, a <em>box</em> is returned whose first and last indices are <code>start</code> and <code>stop</code>.</p></li><li><p>If <code>args...</code> is a Cartesian range, say <code>R::CartesianIndices{N}</code>, a <em>box</em> array is returned whose axes are given by <code>R</code>.</p></li><li><p>If <code>args...</code> is an abstract array of any other type than <code>CartesianIndices</code>, it is returned unchanged.</p></li></ul><p>Optional leading argument <code>Dims{N}</code> can be specified to assert the number of dimensions of the result or to provide the number of dimensions when it cannot be inferred from the arguments. For example, when <code>args...</code> is a single integer length or range which should be interpreted as being the same for all dimensions.</p><p>See also <a href="#LocalFilters.strel"><code>LocalFilters.strel</code></a>, <a href="#LocalFilters.ball"><code>LocalFilters.ball</code></a>, <a href="#LocalFilters.kernel_range"><code>LocalFilters.kernel_range</code></a>, and <a href="#LocalFilters.reverse_kernel"><code>LocalFilters.reverse_kernel</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/utils.jl#L69-L106">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.Kernel" href="#LocalFilters.Kernel"><code>LocalFilters.Kernel</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LocalFilters.Kernel{N}</code></pre><p>is the union of types of arguments suitable to define a <code>N</code>-dimensional kernel or filter. Any argument <code>B</code> of this type can be converted into a <code>N</code>-dimensional kernel array by <a href="#LocalFilters.kernel"><code>kernel(Dims{N}, B)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/types.jl#L40-L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.Window" href="#LocalFilters.Window"><code>LocalFilters.Window</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LocalFilters.Window{N}</code></pre><p>is the union of types of arguments suitable to define a <code>N</code>-dimensional <em>sliding window</em> that is a <code>N</code>-dimensional array of Booleans indicating whether a position belongs to the window of not. Any argument <code>B</code> of this type can be converted into a <code>N</code>-dimensional array of Booleans by <a href="#LocalFilters.kernel"><code>kernel(Dims{N}, B)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/types.jl#L51-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.strel" href="#LocalFilters.strel"><code>LocalFilters.strel</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">strel(T, A)</code></pre><p>yields a <em>structuring element</em> suitable for mathematical morphology operations. The result is an array whose elements have type <code>T</code> (which can be <code>Bool</code> or a floating-point type). Argument <code>A</code> can be a hyper-rectangular Cartesian sliding window or an array with boolean elements.</p><p>If <code>T</code> is a floating-point type, then the result is a so-called <em>flat</em> structuring element whose coefficients are <code>zero(T)</code> inside the shape defined by <code>A</code> and <code>-T(Inf)</code> elsewhere.</p><p>See also <a href="#LocalFilters.kernel"><code>LocalFilters.kernel</code></a>, <a href="#LocalFilters.box"><code>LocalFilters.box</code></a>, and <a href="#LocalFilters.ball"><code>LocalFilters.ball</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/utils.jl#L385-L399">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.ball" href="#LocalFilters.ball"><code>LocalFilters.ball</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LocalFilters.ball(Dims{N}, r)</code></pre><p>yields a mask approximating a <code>N</code>-dimensional ball of radius <code>r</code>. The result is <code>N</code>-dimensional array of Boolean&#39;s with all dimensions odd and equal and whose values are <code>true</code> inside the ball (where distance to the center <code>≤ r</code>) and <code>false</code> otherwise. The mask may be used to specify the neighborhood, the kernel, or the structuring element in local filtering operations.</p><p>The returned mask has centered axes, to get a mask with 1-based indices, call:</p><pre><code class="nohighlight hljs">LocalFilters.ball(Dims{N}, r).parent</code></pre><p>See also <a href="#LocalFilters.kernel"><code>LocalFilters.kernel</code></a> and <a href="#LocalFilters.strel"><code>LocalFilters.strel</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/utils.jl#L423-L438">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.box" href="#LocalFilters.box"><code>LocalFilters.box</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LocalFilters.box(args...) -&gt; B::Box</code></pre><p>yields an hyper-rectangular sliding window for local filtering or mathematical morphology operations with the same axes or indices as its argument(s).</p><p>See also <a href="#LocalFilters.kernel"><code>LocalFilters.kernel</code></a> and <a href="#LocalFilters.strel"><code>LocalFilters.strel</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/utils.jl#L369-L377">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.Box" href="#LocalFilters.Box"><code>LocalFilters.Box</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">const LocalFilters.Box{N} = FastUniformArray{Bool,N,true}</code></pre><p>is an alias to the type of uniformly <code>true</code> <code>N</code>-dimensional arrays. Instances of this kind are used to represent hyper-rectangular sliding windows in <code>LocalFilters</code>.</p><p>Method <a href="#LocalFilters.box"><code>LocalFilters.box</code></a> can be used to build an object of this type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/types.jl#L16-L24">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.centered" href="#LocalFilters.centered"><code>LocalFilters.centered</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>LocalFilters.centered(A) -&gt; B</p><p>yields an abstract array <code>B</code> sharing the entries of array <code>A</code> but with offsets on indices so that the axes of <code>B</code> are <em>centered</em> (for even dimension lengths, the same conventions as in <code>fftshift</code> are used).</p><p>This <em>public</em> method is purposely not exported because it could introduce some confusions. For example <code>OffsetArrays.centered</code> is similar but has a slightly different semantic.</p><p>See also <a href="#LocalFilters.kernel_range"><code>LocalFilters.kernel_range</code></a>, <a href="#LocalFilters.centered_offset"><code>LocalFilters.centered_offset</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/utils.jl#L325-L337">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.reverse_kernel" href="#LocalFilters.reverse_kernel"><code>LocalFilters.reverse_kernel</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">B = reverse_kernel(args...)</code></pre><p>yields a kernel <code>B</code> which is similar to <code>A = kernel(args...)</code> but with reversed ordering in the sense that <code>B[i] == A[-i]</code> holds for all indices <code>i</code> such that <code>-i</code> is a valid index in <code>A</code>. As a consequence, a correlation by <code>B</code> yields the same result as a convolution by <code>A</code> and conversely.</p><p>See also <a href="#LocalFilters.kernel"><code>LocalFilters.kernel</code></a> and <a href="#LocalFilters.strel"><code>LocalFilters.strel</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/utils.jl#L228-L238">source</a></section></article><h2 id="Utilities"><a class="docs-heading-anchor" href="#Utilities">Utilities</a><a id="Utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Utilities" title="Permalink"></a></h2><p>Below are described non-exported types and methods that may be useful in the context of building local filters.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.Indices" href="#LocalFilters.Indices"><code>LocalFilters.Indices</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">I = LocalFilters.Indices(A::AbstractArray...)</code></pre><p>builds a callable object, <code>I</code>, that can be used to produce ranges of indices for each of the arrays <code>A...</code>. These ranges will all be of the same type: linear index ranges, if all arrays <code>A...</code> are vectors, Cartesian index ranges otherwise.</p><p><code>I</code> is similar to the <code>eachindex</code> method but is specialized for a style of indexing, it can be called as <code>I(B...)</code> to yield a suitable index range to access all the entries of array(s) <code>B...</code> which are any number of the <code>A...</code> specified when building <code>I</code>. If <code>B...</code> consists in several arrays, they must have the same axes otherwise <code>I(B...)</code> will throw a <code>DimensionMismatch</code> exception.</p><p>Call:</p><p>I = LocalFilters.Indices{S}()</p><p>with <code>S = IndexLinear</code> or <code>S = IndexCartesian</code> to specifically choose the indexing style.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/utils.jl#L1-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.localindices" href="#LocalFilters.localindices"><code>LocalFilters.localindices</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LocalFilters.localindices(A_inds, ord, B_inds, i) -&gt; J</code></pre><p>yields the subset <code>J</code> of all indices <code>j</code> such that:</p><ul><li><p><code>A[j]</code> and <code>B[ord(i,j)] = B[j-i]</code> are in-bounds if <code>ord = FORWARD_FILTER</code>;</p></li><li><p><code>A[j]</code> and <code>B[ord(i,j)] = B[i-j]</code> are in-bounds if <code>ord = REVERSE_FILTER</code>;</p></li></ul><p>with <code>A</code> and <code>B</code> arrays whose index ranges are given by <code>A_inds</code> and <code>B_inds</code>. To make the code agnostic to the ordering, use <code>A[i]</code> and <code>B[ord(i,j)]</code> to retrieve the values in <code>A</code> and <code>B</code>.</p><p>Index ranges <code>A_inds</code> and <code>B_inds</code> and index <code>i</code> must be of the same kind:</p><ul><li><p>linear index ranges for <code>A_inds</code> and <code>B_inds</code> and linear index for <code>i</code>;</p></li><li><p>Cartesian index ranges for <code>A_inds</code> and <code>B_inds</code> and Cartesian index for <code>i</code> of same number of dimensions.</p></li></ul><p>Constructor <a href="#LocalFilters.Indices"><code>LocalFilters.Indices</code></a> may by used to build a callable object that yields the index ranges of <code>A</code> and <code>B</code> in a consistent way:</p><pre><code class="nohighlight hljs">indices = LocalFilters.Indices(A, B)
A_inds = indices(A)
B_inds = indices(B)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/utils.jl#L269-L296">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.check_axes" href="#LocalFilters.check_axes"><code>LocalFilters.check_axes</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LocalFilters.check_axes([I,] A...)</code></pre><p>throws an exception if not all arrays <code>A...</code> have the same axes, or all have axes <code>I</code> if specified.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/utils.jl#L38-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.is_morpho_math_box" href="#LocalFilters.is_morpho_math_box"><code>LocalFilters.is_morpho_math_box</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LocalFilters.is_morpho_math_box(B)</code></pre><p>yields whether structuring element <code>B</code> has the same effect as an hyper-rectangular box for mathematical morphology operations. This may be used to use fast separable versions of mathematical morphology operations like the van Herk-Gil-Werman algorithm.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/utils.jl#L354-L361">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.kernel_range" href="#LocalFilters.kernel_range"><code>LocalFilters.kernel_range</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LocalFilters.kernel_range([ord=FORWARD_FILTER,] rng::AbstractRange{&lt;:Integer})
LocalFilters.kernel_range([ord=FORWARD_FILTER,] len::Integer)
LocalFilters.kernel_range([ord=FORWARD_FILTER,] start::Integer, stop::Integer)</code></pre><p>yield an unit-step <code>Int</code>-valued index range based on range <code>rng</code>, dimension length <code>len</code>, or first and last indices <code>start</code> and <code>stop</code>. In the case of a given dimension length, a centered range of this length is returned (for even lengths, the same conventions as in <code>fftshift</code> are used).</p><p>If ordering <code>ord</code> is specified, the returned range is suitable for this ordering.</p><p>See also <a href="#LocalFilters.kernel"><code>LocalFilters.kernel</code></a>, <a href="#LocalFilters.centered_offset"><code>LocalFilters.centered_offset</code></a>, and <a href="#LocalFilters.centered"><code>LocalFilters.centered</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/utils.jl#L156-L171">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.unit_range" href="#LocalFilters.unit_range"><code>LocalFilters.unit_range</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LocalFilters.unit_range(r::Union{AbstractRange{&lt;:Integer},CartesianIndices})</code></pre><p>converts <code>r</code> into an <code>Int</code>-valued unit step index range. <code>r</code> may be a linear or a Cartesian index range. If <code>r</code> is a linear range, the absolute value of its step must be 1.</p><pre><code class="nohighlight hljs">LocalFilters.unit_range(start::Integer, stop::Integer)</code></pre><p>yields the <code>Int</code>-valued unit step range <code>Int(start):Int(stop)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/utils.jl#L188-L198">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LocalFilters.centered_offset" href="#LocalFilters.centered_offset"><code>LocalFilters.centered_offset</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>LocalFilters.centered_offset(len)</p><p>yields the index offset along a centered dimension of length <code>len</code>. That is, <code>-div(Int(len)+2,2)</code>. For even dimension lengths, this amounts to using the same conventions as in <code>fftshift</code>.</p><p>See <a href="#LocalFilters.kernel_range"><code>LocalFilters.kernel_range</code></a> and <a href="#LocalFilters.centered"><code>LocalFilters.centered</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/LocalFilters.jl/blob/4fd4df3d92a8a7d4c3f9b58b58903717a76dbdfd/src/utils.jl#L140-L149">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../separable/">« Efficient separable filters for associative operations</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Wednesday 12 March 2025 15:31">Wednesday 12 March 2025</span>. Using Julia version 1.11.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
